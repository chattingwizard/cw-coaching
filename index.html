<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Coaching Dashboard — Chatting Wizard</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',system-ui,sans-serif;background:#0d1117;color:#e6edf3;min-height:100vh}
a{color:#58a6ff;text-decoration:none}a:hover{text-decoration:underline}

/* Header */
.hdr{text-align:center;padding:36px 20px 12px;position:relative}
.hdr h1{font-size:2em;font-weight:700;color:#58a6ff;margin-bottom:4px}
.hdr p{color:#8b949e;font-size:.9em}
.hdr .ts{color:#484f58;font-size:.8em;margin-top:6px}
.live-dot{display:inline-block;width:8px;height:8px;border-radius:50%;background:#3fb950;margin-right:6px;animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}

/* Week selector */
.week-bar{display:flex;justify-content:center;align-items:center;gap:8px;padding:10px 20px;background:#0d1117}
.week-btn{background:#161b22;border:1px solid #30363d;color:#8b949e;width:36px;height:36px;border-radius:8px;cursor:pointer;font-size:1.1em;display:flex;align-items:center;justify-content:center;transition:all .2s}
.week-btn:hover{border-color:#58a6ff;color:#58a6ff}
.week-btn:disabled{opacity:.3;cursor:default;border-color:#30363d;color:#484f58}
.week-label{font-size:.95em;font-weight:600;color:#e6edf3;min-width:200px;text-align:center}
.week-label .sub{font-size:.75em;color:#8b949e;font-weight:400;display:block;margin-top:1px}
.week-tag{font-size:.7em;padding:2px 8px;border-radius:10px;font-weight:600;margin-left:6px;vertical-align:middle}
.week-tag.current{background:#3fb95022;color:#3fb950;border:1px solid #3fb95033}
.week-tag.prev{background:#58a6ff22;color:#58a6ff;border:1px solid #58a6ff33}

/* Nav tabs */
.nav{display:flex;justify-content:center;gap:4px;padding:8px 20px;flex-wrap:wrap;position:sticky;top:0;background:#0d1117;z-index:100;border-bottom:1px solid #21262d}
.nav button{background:#161b22;border:1px solid #30363d;color:#8b949e;padding:8px 16px;border-radius:8px;cursor:pointer;font-size:.85em;font-weight:500;transition:all .2s}
.nav button:hover{border-color:#58a6ff;color:#e6edf3}
.nav button.active{background:#58a6ff22;border-color:#58a6ff;color:#58a6ff}

/* Container */
.container{max-width:1400px;margin:0 auto;padding:20px}
.section{display:none}.section.active{display:block}

/* Top stats row */
.stats-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:12px;margin-bottom:24px}
.stat-card{background:#161b22;border:1px solid #30363d;border-radius:10px;padding:16px;text-align:center;transition:border-color .2s}
.stat-card:hover{border-color:#58a6ff}
.stat-card .num{font-size:2em;font-weight:700}
.stat-card .lbl{font-size:.75em;color:#8b949e;text-transform:uppercase;letter-spacing:.5px;margin-top:2px}

/* TL summary cards */
.tl-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(340px,1fr));gap:16px;margin-bottom:28px}
.tl-card{background:#161b22;border:1px solid #30363d;border-radius:12px;padding:20px;cursor:pointer;transition:all .25s}
.tl-card:hover{transform:translateY(-3px);box-shadow:0 8px 24px rgba(0,0,0,.3)}
.tl-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}
.tl-name{font-size:1.2em;font-weight:700}
.tl-shift-badge{font-size:.75em;padding:3px 10px;border-radius:20px;font-weight:600}
.tl-nums{display:flex;gap:20px;margin-bottom:14px}
.tl-nums .n{text-align:center;flex:1}
.tl-nums .n .v{font-size:1.4em;font-weight:700}
.tl-nums .n .l{font-size:.65em;color:#8b949e;text-transform:uppercase}
.bar-bg{height:6px;background:#21262d;border-radius:3px;overflow:hidden;margin-bottom:4px}
.bar-fill{height:100%;border-radius:3px;transition:width .6s ease}
.bar-label{font-size:.75em;color:#8b949e}

/* Search */
.search-box{display:flex;gap:8px;margin-bottom:20px;flex-wrap:wrap;align-items:center}
.search-box input{background:#161b22;border:1px solid #30363d;color:#e6edf3;padding:8px 14px;border-radius:8px;font-size:.9em;flex:1;min-width:200px;outline:none}
.search-box input:focus{border-color:#58a6ff}
.filter-btn{background:#161b22;border:1px solid #30363d;color:#8b949e;padding:6px 14px;border-radius:20px;cursor:pointer;font-size:.8em;transition:all .2s}
.filter-btn:hover,.filter-btn.on{background:#58a6ff22;border-color:#58a6ff;color:#58a6ff}

/* Sort buttons */
.sort-bar{display:flex;gap:6px;margin-bottom:12px;flex-wrap:wrap}
.sort-btn{background:none;border:1px solid #30363d;color:#8b949e;padding:4px 10px;border-radius:6px;cursor:pointer;font-size:.75em}
.sort-btn:hover,.sort-btn.active{border-color:#58a6ff;color:#58a6ff}

/* Chatter grid */
.chatter-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:12px}
.ch-card{background:#161b22;border:1px solid #30363d;border-radius:10px;overflow:hidden;transition:border-color .2s}
.ch-card:hover{border-color:#58a6ff}
.ch-card.alarm{border-left:3px solid #f85149}
.ch-main{padding:14px 16px;cursor:pointer;display:flex;justify-content:space-between;align-items:center}
.ch-left{flex:1}
.ch-name{font-weight:600;font-size:.95em;margin-bottom:4px}
.ch-meta{display:flex;gap:6px;flex-wrap:wrap}
.ch-right{text-align:right}
.ch-urg{font-size:1.6em;font-weight:700;line-height:1}
.ch-urg-label{font-size:.6em;color:#8b949e;text-transform:uppercase}

/* Badge */
.badge{display:inline-block;padding:2px 8px;border-radius:20px;font-size:.7em;font-weight:600}
.b-red{background:#f8514922;color:#f85149;border:1px solid #f8514933}
.b-yellow{background:#d2992222;color:#d29922;border:1px solid #d2992233}
.b-green{background:#3fb95022;color:#3fb950;border:1px solid #3fb95033}
.b-blue{background:#58a6ff22;color:#58a6ff;border:1px solid #58a6ff33}
.tag{display:inline-block;padding:1px 6px;border-radius:4px;font-size:.7em;margin-right:3px}
.t-red{background:#f8514922;color:#f85149}.t-orange{background:#d2992222;color:#d29922}
.t-green{background:#3fb95022;color:#3fb950}.t-blue{background:#58a6ff22;color:#58a6ff}

/* Expanded detail */
.ch-detail{display:none;padding:0 16px 14px;border-top:1px solid #21262d}
.ch-detail.open{display:block}
.kpi-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:8px;margin:10px 0}
.kpi-item{background:#0d1117;border-radius:6px;padding:8px 10px}
.kpi-label{font-size:.65em;color:#8b949e;text-transform:uppercase;margin-bottom:2px}
.kpi-val{font-size:1.1em;font-weight:700}
.kpi-bar{height:4px;background:#21262d;border-radius:2px;margin-top:4px;overflow:hidden}
.kpi-bar-fill{height:100%;border-radius:2px}
.detail-section{margin-top:10px}
.detail-section h4{font-size:.75em;color:#8b949e;text-transform:uppercase;margin-bottom:6px}
.detail-section p{font-size:.85em;color:#e6edf3;margin-bottom:4px}
.err-item{font-size:.8em;color:#d29922;margin-bottom:4px;padding-left:10px;border-left:2px solid #d2992244}

/* Table */
.log-table{width:100%;border-collapse:collapse;font-size:.85em}
.log-table th{text-align:left;padding:10px 8px;color:#8b949e;font-weight:500;border-bottom:1px solid #21262d;font-size:.75em;text-transform:uppercase}
.log-table td{padding:10px 8px;border-bottom:1px solid #161b22}
.log-table tr:hover td{background:#161b2288}
.log-notes-cell{color:#8b949e;font-size:.85em;max-width:300px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

/* Alarms table */
.alarm-card{background:#161b22;border:1px solid #30363d;border-radius:10px;overflow:hidden}

/* Empty state */
.empty{text-align:center;padding:40px;color:#484f58}
.empty p{margin:4px 0}

/* Alert banner */
.alert-banner{background:#161b22;border:1px solid #d2992244;border-radius:10px;padding:12px 16px;margin-bottom:20px;display:flex;align-items:center;gap:10px;font-size:.9em;color:#d29922}
.alert-banner strong{color:#e6edf3}

/* Responsive */
@media(max-width:768px){
  .tl-row,.chatter-grid{grid-template-columns:1fr}
  .stats-row{grid-template-columns:repeat(2,1fr)}
  .container{padding:12px}
  .nav{gap:3px;padding:6px 10px}
  .nav button{padding:6px 10px;font-size:.8em}
  .week-label{min-width:150px;font-size:.85em}
}
</style>
</head>
<body>

<div class="hdr">
  <h1>Coaching Dashboard</h1>
  <p>Chatting Wizard — Team Coaching Overview</p>
  <div class="ts" id="genTime"></div>
</div>

<!-- Week selector -->
<div class="week-bar">
  <button class="week-btn" id="weekPrev" onclick="changeWeek(-1)">&#9664;</button>
  <div class="week-label" id="weekLabel"></div>
  <button class="week-btn" id="weekNext" onclick="changeWeek(1)">&#9654;</button>
</div>

<div class="nav" id="nav">
  <button class="active" data-tab="overview">Overview</button>
  <button data-tab="huckle">Huckle</button>
  <button data-tab="danilyn">Danilyn</button>
  <button data-tab="ezekiel">Ezekiel</button>
  <button data-tab="alarms">KPI Alarms</button>
  <button data-tab="activity">Activity Log</button>
</div>

<div class="container">
  <!-- OVERVIEW -->
  <div class="section active" id="sec-overview">
    <div class="stats-row" id="topStats"></div>
    <div id="alertBanner"></div>
    <div class="tl-row" id="tlCards"></div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <div style="font-size:1em;font-weight:600;color:#8b949e;text-transform:uppercase;letter-spacing:1px">All Chatters</div>
    </div>
    <div class="search-box">
      <input type="text" id="searchAll" placeholder="Search chatter...">
      <button class="filter-btn on" data-f="all" onclick="toggleFilter(this,'overview')">All</button>
      <button class="filter-btn" data-f="alarm" onclick="toggleFilter(this,'overview')">With Alarms</button>
      <button class="filter-btn" data-f="nocoach" onclick="toggleFilter(this,'overview')">Never Coached</button>
    </div>
    <div class="sort-bar">
      <button class="sort-btn active" data-s="urgency" onclick="setSort(this,'overview')">Urgency</button>
      <button class="sort-btn" data-s="name" onclick="setSort(this,'overview')">Name</button>
      <button class="sort-btn" data-s="days" onclick="setSort(this,'overview')">Days Since</button>
      <button class="sort-btn" data-s="alarms" onclick="setSort(this,'overview')">Alarms</button>
    </div>
    <div class="chatter-grid" id="allChatters"></div>
  </div>

  <!-- TL DETAIL TABS -->
  <div class="section" id="sec-huckle"></div>
  <div class="section" id="sec-danilyn"></div>
  <div class="section" id="sec-ezekiel"></div>

  <!-- ALARMS -->
  <div class="section" id="sec-alarms">
    <div style="font-size:1em;font-weight:600;color:#8b949e;text-transform:uppercase;letter-spacing:1px;margin-bottom:16px">KPI Alarms</div>
    <div class="alarm-card"><table class="log-table" id="alarmTable"></table></div>
  </div>

  <!-- ACTIVITY LOG -->
  <div class="section" id="sec-activity">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
      <div style="font-size:1em;font-weight:600;color:#8b949e;text-transform:uppercase;letter-spacing:1px">Coaching Sessions</div>
      <div id="activityWeekInfo" style="font-size:.8em;color:#8b949e"></div>
    </div>
    <div class="alarm-card" id="activityContainer"></div>
  </div>
</div>

<div style="text-align:center;padding:30px;color:#484f58;font-size:.75em">
  Chatting Wizard — Coaching Dashboard — 2026<br>Management use only
</div>

<script>
// ── DATA (injected by Python) ──
const D = {"chatters": [{"name": "Samantha Vanguardia", "team": "huckle", "team_display": "Team Huckle", "urgency": 84, "days_since": -1, "kpi": {"name": "Samantha Vanguardia", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$6.12", "golden": "0.25%", "unlock": "42.86%", "cvr": "2.37%", "reply_time": "03:34", "msg_hr": "73.00"}, "alarms": [{"metric": "Sales/hr", "value": "$6.12", "threshold": 10}, {"metric": "CVR", "value": "2.37%", "threshold": 5}, {"metric": "Golden Ratio", "value": "0.25%", "threshold": 1}], "alarm_count": 3, "errors": 2, "recent_errors": [{"date": "2026-02-05", "text": "The question “Are you going to open it once I send it?” interrupts a moment where the fan is already fully primed and ve"}, {"date": "2026-02-04", "text": "While the intent to gather the fan’s personal info is valid, the timing here disrupts a high-arousal moment that was alr"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Amos Wanjala", "team": "huckle", "team_display": "Team Huckle", "urgency": 76, "days_since": -1, "kpi": {"name": "Amos Wanjala", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$7.10", "golden": "4.37%", "unlock": "18.68%", "cvr": "4.98%", "reply_time": "01:25", "msg_hr": "52.66"}, "alarms": [{"metric": "Sales/hr", "value": "$7.10", "threshold": 10}, {"metric": "CVR", "value": "4.98%", "threshold": 5}, {"metric": "Unlock Rate", "value": "18.68%", "threshold": 20}], "alarm_count": 3, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Hannah Andrea Ibañez", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 76, "days_since": -1, "kpi": {"name": "Hannah Andrea Ibañez", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$1.32", "golden": "0.80%", "unlock": "33.33%", "cvr": "2.22%", "reply_time": "01:01", "msg_hr": "45.82"}, "alarms": [{"metric": "Sales/hr", "value": "$1.32", "threshold": 10}, {"metric": "CVR", "value": "2.22%", "threshold": 5}, {"metric": "Golden Ratio", "value": "0.80%", "threshold": 1}], "alarm_count": 3, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Yhana Jean Aguelo", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 76, "days_since": -1, "kpi": {"name": "Yhana Jean Aguelo", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$8.56", "golden": "0.79%", "unlock": "20.00%", "cvr": "2.14%", "reply_time": "03:01", "msg_hr": "83.00"}, "alarms": [{"metric": "Sales/hr", "value": "$8.56", "threshold": 10}, {"metric": "CVR", "value": "2.14%", "threshold": 5}, {"metric": "Golden Ratio", "value": "0.79%", "threshold": 1}], "alarm_count": 3, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Ruztinn Josef Francisco", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 68, "days_since": -1, "kpi": {"name": "Ruztinn Josef Francisco", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$8.50", "golden": "2.38%", "unlock": "30.30%", "cvr": "3.89%", "reply_time": "01:21", "msg_hr": "52.41"}, "alarms": [{"metric": "Sales/hr", "value": "$8.50", "threshold": 10}, {"metric": "CVR", "value": "3.89%", "threshold": 5}], "alarm_count": 2, "errors": 1, "recent_errors": [{"date": "2026-02-11", "text": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on res"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Adedeji Oyeniran", "team": "huckle", "team_display": "Team Huckle", "urgency": 64, "days_since": -1, "kpi": {"name": "Adedeji Oyeniran", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$6.72", "golden": "3.94%", "unlock": "27.91%", "cvr": "5.84%", "reply_time": "01:27", "msg_hr": "34.47"}, "alarms": [{"metric": "Sales/hr", "value": "$6.72", "threshold": 10}], "alarm_count": 1, "errors": 3, "recent_errors": [{"date": "2026-02-07", "text": "The chatter was not responding and appeared AFK during working hours, which negatively impacts fan engagement, service q"}, {"date": "2026-02-06", "text": "While he doesn't have any spent yet your job is to entertain him and get to know him better possibly converting him to s"}, {"date": "2026-02-06", "text": "The chatter left the fan without a response, which breaks the flow of the conversation and risks losing engagement and p"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "martin john aguilar", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 60, "days_since": -1, "kpi": {"name": "martin john aguilar", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$40.66", "golden": "4.57%", "unlock": "50.00%", "cvr": "8.15%", "reply_time": "01:59", "msg_hr": "32.83"}, "alarms": [], "alarm_count": 0, "errors": 6, "recent_errors": [{"date": "2026-02-11", "text": "The chatter’s response was dull and lacked engagement, which weakened the flow of the conversation and reduced the chanc"}, {"date": "2026-02-11", "text": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on res"}, {"date": "2026-02-07", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Cris John Lacno", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 60, "days_since": -1, "kpi": {"name": "Cris John Lacno", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$142.21", "golden": "4.01%", "unlock": "37.14%", "cvr": "8.27%", "reply_time": "01:38", "msg_hr": "229.00"}, "alarms": [], "alarm_count": 0, "errors": 8, "recent_errors": [{"date": "2026-02-10", "text": "The chatter did not engage in proper sexting and instead sent a random teaser without building context or arousal, which"}, {"date": "2026-02-10", "text": "The response was dull and disengaging, which caused the conversation to lose momentum. More engaging replies, light teas"}, {"date": "2026-02-10", "text": "Chatters left the fan with no response and did not provide a proper way to end the conversation. This breaks the chat fl"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Ralf Zyre Bambalan", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 60, "days_since": -1, "kpi": {"name": "Ralf Zyre Bambalan", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$41.75", "golden": "2.85%", "unlock": "32.50%", "cvr": "5.56%", "reply_time": "01:15", "msg_hr": "63.13"}, "alarms": [], "alarm_count": 0, "errors": 6, "recent_errors": [{"date": "2026-02-10", "text": "The chatter’s responses were dull, especially considering the fan is a new subscriber. New subs should be welcomed with "}, {"date": "2026-02-09", "text": "The chatter was not engaging when dropping the PPV and responded in a dull, low-energy way, which reduced interest and m"}, {"date": "2026-02-07", "text": "The chatter did not send a follow-up message after the PPV purchase, missing an opportunity to reinforce engagement, bui"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Princess Diane Manalo", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 60, "days_since": -1, "kpi": {"name": "Princess Diane Manalo", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$76.35", "golden": "8.18%", "unlock": "27.17%", "cvr": "9.99%", "reply_time": "02:19", "msg_hr": "85.14"}, "alarms": [], "alarm_count": 0, "errors": 6, "recent_errors": [{"date": "2026-02-11", "text": "The chatter did not take the time to get to know the fan and attempted to sell immediately, which made the interaction f"}, {"date": "2026-02-10", "text": "The chatter gave dull responses and did not engage the conversation effectively, which limited the buildup needed to lea"}, {"date": "2026-02-10", "text": "The chatter was overly aggressive in pushing the PPV and priced it too high, especially considering the content was not "}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Adriane Ellor Sulita", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 60, "days_since": -1, "kpi": {"name": "Adriane Ellor Sulita", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$12.89", "golden": "2.97%", "unlock": "28.99%", "cvr": "4.95%", "reply_time": "00:57", "msg_hr": "58.86"}, "alarms": [{"metric": "CVR", "value": "4.95%", "threshold": 5}], "alarm_count": 1, "errors": 2, "recent_errors": [{"date": "2026-02-06", "text": "Adriane can't continue to shift due to the typhoon and not having electricity in their area; she has already assigned he"}, {"date": "2026-02-06", "text": "He should not have agreed to being spoken to or directed by the fan in that manner, as it does not align with the profes"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "MARY WAMBUI GITHIGE", "team": "huckle", "team_display": "Team Huckle", "urgency": 60, "days_since": -1, "kpi": {"name": "MARY WAMBUI GITHIGE", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$78.28", "golden": "3.36%", "unlock": "53.68%", "cvr": "7.78%", "reply_time": "02:20", "msg_hr": "88.43"}, "alarms": [], "alarm_count": 0, "errors": 7, "recent_errors": [{"date": "2026-02-09", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}, {"date": "2026-02-09", "text": "Clarifications for  Videocall platform and price."}, {"date": "2026-02-09", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Cezar E. Edades Jr", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 60, "days_since": -1, "kpi": {"name": "Cezar E. Edades Jr", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$82.46", "golden": "3.93%", "unlock": "41.00%", "cvr": "7.52%", "reply_time": "01:50", "msg_hr": "101.05"}, "alarms": [], "alarm_count": 0, "errors": 6, "recent_errors": [{"date": "2026-02-11", "text": "The chatter was overly aggressive in selling and did not engage in proper conversation before pitching the PPV, which fe"}, {"date": "2026-02-10", "text": "The chatter’s approach was overly transactional, focusing on selling rather than building attraction, engagement, and a "}, {"date": "2026-02-06", "text": "The approach was overly transactional and jumped straight into pricing instead of building interest through texting and "}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Dionefel Mamites", "team": "huckle", "team_display": "Team Huckle", "urgency": 60, "days_since": -1, "kpi": {"name": "Dionefel Mamites", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$20.44", "golden": "3.90%", "unlock": "38.89%", "cvr": "8.45%", "reply_time": "01:14", "msg_hr": "53.89"}, "alarms": [], "alarm_count": 0, "errors": 8, "recent_errors": [{"date": "2026-02-11", "text": "Provided VC specifications about which platform the model be using and also the ideal price."}, {"date": "2026-02-11", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}, {"date": "2026-02-10", "text": "The conversation felt too transactional. There should be a smoother, more natural way to close the interaction—one that "}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Don Mc Rey Parone", "team": "huckle", "team_display": "Team Huckle", "urgency": 56, "days_since": -1, "kpi": {"name": "Don Mc Rey Parone", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$11.24", "golden": "2.24%", "unlock": "31.71%", "cvr": "2.93%", "reply_time": "01:10", "msg_hr": "47.28"}, "alarms": [{"metric": "CVR", "value": "2.93%", "threshold": 5}], "alarm_count": 1, "errors": 1, "recent_errors": [{"date": "2026-02-11", "text": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on res"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "JOHN ARSEL MUHI ", "team": "huckle", "team_display": "Team Huckle", "urgency": 56, "days_since": -1, "kpi": {"name": "JOHN ARSEL MUHI ", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$52.01", "golden": "7.94%", "unlock": "29.02%", "cvr": "7.90%", "reply_time": "03:04", "msg_hr": "93.66"}, "alarms": [], "alarm_count": 0, "errors": 4, "recent_errors": [{"date": "2026-02-11", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}, {"date": "2026-02-10", "text": "The approach toward the new fan came across as rude. A more respectful tone and a proper, polite exit should have been u"}, {"date": "2026-02-10", "text": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost eng"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Leny Rose L. Noma", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 52, "days_since": -1, "kpi": {"name": "Leny Rose L. Noma", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$13.55", "golden": "5.33%", "unlock": "26.15%", "cvr": "9.45%", "reply_time": "01:19", "msg_hr": "56.13"}, "alarms": [], "alarm_count": 0, "errors": 3, "recent_errors": [{"date": "2026-02-10", "text": "The chatter did not follow the inflow script and ignored the manager’s instructions. Moving forward, it’s important to s"}, {"date": "2026-02-06", "text": "The chatter did not follow the inflow script and instead used a personal script, which disrupted the intended flow and r"}, {"date": "2026-02-06", "text": "The chatter did not follow the inflow script and instead used a personal script, which disrupted the intended flow and r"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Rachael Yvonne Murugi", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 52, "days_since": -1, "kpi": {"name": "Rachael Yvonne Murugi", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$8.18", "golden": "3.66%", "unlock": "28.21%", "cvr": "5.68%", "reply_time": "02:33", "msg_hr": "29.01"}, "alarms": [{"metric": "Sales/hr", "value": "$8.18", "threshold": 10}], "alarm_count": 1, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Emmanuel Okoth Owino", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 52, "days_since": -1, "kpi": {"name": "Emmanuel Okoth Owino", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$5.93", "golden": "4.56%", "unlock": "20.00%", "cvr": "6.55%", "reply_time": "02:01", "msg_hr": "30.45"}, "alarms": [{"metric": "Sales/hr", "value": "$5.93", "threshold": 10}], "alarm_count": 1, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Fiona Ajiambo", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 48, "days_since": -1, "kpi": {"name": "Fiona Ajiambo", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$16.06", "golden": "3.22%", "unlock": "40.68%", "cvr": "5.22%", "reply_time": "04:04", "msg_hr": "46.69"}, "alarms": [], "alarm_count": 0, "errors": 2, "recent_errors": [{"date": "2026-02-11", "text": "Missed this sub on Lana, this is clearly a missed opportunity. Please make sure to reply to him"}, {"date": "2026-02-11", "text": "Made an announcement asking everyone to handle unattended AI chats for 5-10 minutes. "}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Matt Yuri V. Albarillo", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 44, "days_since": -1, "kpi": {"name": "Matt Yuri V. Albarillo", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$116.44", "golden": "3.11%", "unlock": "60.00%", "cvr": "10.07%", "reply_time": "01:43", "msg_hr": "81.04"}, "alarms": [], "alarm_count": 0, "errors": 1, "recent_errors": [{"date": "2026-02-04", "text": "The chatter’s sales performance was significantly below expectations, with minimal effort or effectiveness in driving pu"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Steven Mwamuye", "team": "huckle", "team_display": "Team Huckle", "urgency": 44, "days_since": -1, "kpi": {"name": "Steven Mwamuye", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$31.42", "golden": "6.97%", "unlock": "27.57%", "cvr": "8.62%", "reply_time": "00:53", "msg_hr": "80.41"}, "alarms": [], "alarm_count": 0, "errors": 1, "recent_errors": [{"date": "2026-02-09", "text": "Keep replies more immediate while building rapport, as long pauses (like the 7-minute gap here) can break the flow and k"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Jhunmar Velasco", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 44, "days_since": -1, "kpi": {"name": "Jhunmar Velasco", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$59.91", "golden": "5.84%", "unlock": "30.47%", "cvr": "7.44%", "reply_time": "02:40", "msg_hr": "105.69"}, "alarms": [], "alarm_count": 0, "errors": 1, "recent_errors": [{"date": "2026-02-11", "text": "Pitch the price to the sub first before we're gonna confirm it to our client. We need to make sure how willing is the su"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Sheenmy A. Miro", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 44, "days_since": -1, "kpi": {"name": "Sheenmy A. Miro", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$30.81", "golden": "7.41%", "unlock": "30.05%", "cvr": "10.22%", "reply_time": "01:55", "msg_hr": "59.07"}, "alarms": [], "alarm_count": 0, "errors": 1, "recent_errors": [{"date": "2026-02-04", "text": "Sheenmy didn't clock in, and I reassigned her teams to the chatter who were available to cover and to handle it until EO"}], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Edgar Danson ", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 40, "days_since": -1, "kpi": {"name": "Edgar Danson ", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$18.13", "golden": "3.28%", "unlock": "35.29%", "cvr": "7.47%", "reply_time": "01:53", "msg_hr": "56.27"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Angel Joyce Ranosa", "team": "huckle", "team_display": "Team Huckle", "urgency": 40, "days_since": -1, "kpi": {"name": "Angel Joyce Ranosa", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$17.61", "golden": "5.94%", "unlock": "25.71%", "cvr": "6.33%", "reply_time": "03:26", "msg_hr": "44.72"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Kokoette Okon Umanah", "team": "danilyn", "team_display": "Team Danilyn", "urgency": 40, "days_since": -1, "kpi": {"name": "Kokoette Okon Umanah", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$28.43", "golden": "4.56%", "unlock": "42.35%", "cvr": "9.35%", "reply_time": "01:32", "msg_hr": "46.34"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Trishia Izze Casangyao", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 40, "days_since": -1, "kpi": {"name": "Trishia Izze Casangyao", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$17.69", "golden": "2.94%", "unlock": "28.57%", "cvr": "5.20%", "reply_time": "00:53", "msg_hr": "77.36"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Kimberly Gaile Diaz Bacani", "team": "ezekiel", "team_display": "Team Ezekiel", "urgency": 40, "days_since": -1, "kpi": {"name": "Kimberly Gaile Diaz Bacani", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$70.79", "golden": "5.69%", "unlock": "33.76%", "cvr": "9.40%", "reply_time": "03:16", "msg_hr": "195.69"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Earl Clyde Leinand Ty", "team": "huckle", "team_display": "Team Huckle", "urgency": 40, "days_since": -1, "kpi": {"name": "Earl Clyde Leinand Ty", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$18.10", "golden": "4.42%", "unlock": "24.53%", "cvr": "5.10%", "reply_time": "02:06", "msg_hr": "89.83"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}, {"name": "Allonah Yvonne D. Tumampos", "team": "huckle", "team_display": "Team Huckle", "urgency": 40, "days_since": -1, "kpi": {"name": "Allonah Yvonne D. Tumampos", "period": "2026-01-26 to 2026-02-01", "sales_hr": "$23.21", "golden": "4.16%", "unlock": "35.97%", "cvr": "5.86%", "reply_time": "01:40", "msg_hr": "66.29"}, "alarms": [], "alarm_count": 0, "errors": 0, "recent_errors": [], "last_coached": null, "last_notes": "", "last_action": ""}], "tl": {"huckle": {"name": "Huckle", "shift": "00:00–08:00", "shift_start": 0, "shift_end": 8, "color": "#58a6ff", "total": 11, "kpi_alarms": 4}, "danilyn": {"name": "Danilyn", "shift": "08:00–16:00", "shift_start": 8, "shift_end": 16, "color": "#d2a8ff", "total": 11, "kpi_alarms": 4}, "ezekiel": {"name": "Ezekiel", "shift": "16:00–00:00", "shift_start": 16, "shift_end": 24, "color": "#7ee787", "total": 9, "kpi_alarms": 2}}, "logs": [], "reports": [{"date": "2026-02-11", "chatter": "Dionefel Mamites", "method": "Message", "resolution": "Provided VC specifications about which platform the model be using and also the ideal price."}, {"date": "2026-02-11", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "The chatter was overly aggressive in selling and did not engage in proper conversation before pitching the PPV, which felt abrupt and transactional."}, {"date": "2026-02-11", "chatter": "Fiona Ajiambo", "method": "Message", "resolution": "Missed this sub on Lana, this is clearly a missed opportunity. Please make sure to reply to him"}, {"date": "2026-02-11", "chatter": "Fiona Ajiambo", "method": "Voice Chat", "resolution": "Made an announcement asking everyone to handle unattended AI chats for 5-10 minutes. "}, {"date": "2026-02-11", "chatter": "martin john aguilar", "method": "Voice Chat", "resolution": "The chatter’s response was dull and lacked engagement, which weakened the flow of the conversation and reduced the chance of building interest or driving sales."}, {"date": "2026-02-11", "chatter": "martin john aguilar", "method": "Voice Chat", "resolution": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on responsiveness and professionalism."}, {"date": "2026-02-11", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-11", "chatter": "Jhunmar Velasco", "method": "Message", "resolution": "Pitch the price to the sub first before we're gonna confirm it to our client. We need to make sure how willing is the sub would go for that custom"}, {"date": "2026-02-11", "chatter": "Ruztinn Josef Francisco", "method": "Voice Chat", "resolution": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on responsiveness and professionalism."}, {"date": "2026-02-11", "chatter": "JOHN ARSEL MUHI ", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-11", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "The chatter did not take the time to get to know the fan and attempted to sell immediately, which made the interaction feel rushed and overly transactional. Building rapport first would improve engagement and increase the likelihood of a successful sale."}, {"date": "2026-02-11", "chatter": "Don Mc Rey Parone", "method": "Voice Chat", "resolution": "The chatter did not respond to the fan and left the message unread, which disrupts engagement and reflects poorly on responsiveness and professionalism."}, {"date": "2026-02-10", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "The chatter’s responses were dull, especially considering the fan is a new subscriber. New subs should be welcomed with more energy, warmth, and engaging replies to build interest and set the tone for a positive, attractive conversation."}, {"date": "2026-02-10", "chatter": "JOHN ARSEL MUHI ", "method": "Voice Chat", "resolution": "The approach toward the new fan came across as rude. A more respectful tone and a proper, polite exit should have been used to maintain professionalism and leave a positive impression."}, {"date": "2026-02-10", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "The chatter gave dull responses and did not engage the conversation effectively, which limited the buildup needed to lead fans toward unlocking the PPV."}, {"date": "2026-02-10", "chatter": "Leny Rose L. Noma", "method": "Voice Chat", "resolution": "The chatter did not follow the inflow script and ignored the manager’s instructions. Moving forward, it’s important to stick to the assigned scripts and guidance, as these are designed to keep conversations structured, consistent, and effective."}, {"date": "2026-02-10", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "The conversation felt too transactional. There should be a smoother, more natural way to close the interaction—one that keeps things respectful and engaging and leaves the fan with a positive experience rather than an abrupt ending."}, {"date": "2026-02-10", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The chatter did not engage in proper sexting and instead sent a random teaser without building context or arousal, which weakened the flow of the conversation and reduced sales potential."}, {"date": "2026-02-10", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The response was dull and disengaging, which caused the conversation to lose momentum. More engaging replies, light teasing, or follow-up questions should be used to keep the fan interested and the interaction flowing."}, {"date": "2026-02-10", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "Chatters left the fan with no response and did not provide a proper way to end the conversation. This breaks the chat flow and can leave a negative impression, reducing engagement and future interaction."}, {"date": "2026-02-10", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "The chatter’s approach was overly transactional, focusing on selling rather than building attraction, engagement, and a natural flow in the conversation."}, {"date": "2026-02-10", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "The chatter was overly aggressive in pushing the PPV and priced it too high, especially considering the content was not fully nude. This approach reduced perceived value and negatively impacted the sales outcome."}, {"date": "2026-02-10", "chatter": "JOHN ARSEL MUHI ", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-10", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The chatter did not engage in proper sexting and instead sent a random teaser without building context or arousal, which weakened the flow of the conversation and reduced sales potential."}, {"date": "2026-02-10", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "The chatter was too aggressive when pitching the PPV and failed to build interest through teasing or sexting beforehand, which made the offer feel abrupt and unengaging."}, {"date": "2026-02-09", "chatter": "MARY WAMBUI GITHIGE", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-09", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "Clarifications for  Videocall platform and price."}, {"date": "2026-02-09", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The approach felt overly transactional and too aggressive in pushing the sale, which can turn fans off and hurt engagement."}, {"date": "2026-02-09", "chatter": "Steven Mwamuye", "method": "Message", "resolution": "Keep replies more immediate while building rapport, as long pauses (like the 7-minute gap here) can break the flow and kill the vibe. Even if the fan hasn’t spent in the past month, timely responses help maintain interest and make the conversation feel natural and engaging. Staying present early on increases the chances of warming the fan up."}, {"date": "2026-02-09", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "The chatter was not engaging when dropping the PPV and responded in a dull, low-energy way, which reduced interest and missed the opportunity to drive sales."}, {"date": "2026-02-09", "chatter": "MARY WAMBUI GITHIGE", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-08", "chatter": "JOHN ARSEL MUHI ", "method": "Message", "resolution": "Notified and called him over Slack, a penalty was given."}, {"date": "2026-02-08", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "Mia Luna was not visible on our model info, checked her OF page it could be her nickname."}, {"date": "2026-02-07", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "The chatter did not send a follow-up message after the PPV purchase, missing an opportunity to reinforce engagement, build rapport, and encourage continued spending."}, {"date": "2026-02-07", "chatter": "MARY WAMBUI GITHIGE", "method": "Voice Chat", "resolution": "There was no response to the fan, which resulted in a missed opportunity to engage and build momentum in the conversation."}, {"date": "2026-02-07", "chatter": "Adedeji Oyeniran", "method": "Voice Chat", "resolution": "The chatter was not responding and appeared AFK during working hours, which negatively impacts fan engagement, service quality, and potential sales."}, {"date": "2026-02-07", "chatter": "martin john aguilar", "method": "Voice Chat", "resolution": "The chatter did not respond to the message and left it unread, which disrupts conversation flow and can lead to lost engagement and missed sales opportunities."}, {"date": "2026-02-07", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "The chatter was not responding and appeared AFK during working hours, which negatively impacts fan engagement, service quality, and potential sales."}, {"date": "2026-02-06", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "Even though this fan currently has a 0% PPV unlock rate, the conversation shouldn’t be stopped or deprioritised based on that metric alone. Unlock ratio isn’t part of the chatter’s KPI, so there’s no downside to continuing engagement and building sexual momentum. The fan is still responsive and giving positive signals, which makes sexting a valuable tool to strengthen connection and increase future buying intent. Keeping the energy high here helps condition the fan for conversions later rather than closing the door too early."}, {"date": "2026-02-06", "chatter": "Adedeji Oyeniran", "method": "Message", "resolution": "While he doesn't have any spent yet your job is to entertain him and get to know him better possibly converting him to spend"}, {"date": "2026-02-06", "chatter": "Adriane Ellor Sulita", "method": "Message", "resolution": "Adriane can't continue to shift due to the typhoon and not having electricity in their area; she has already assigned her teams to the chatter who will cover the shift."}, {"date": "2026-02-06", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "The approach was overly transactional and jumped straight into pricing instead of building interest through texting and teasing, which weakened engagement and reduced the chance of a successful sale."}, {"date": "2026-02-06", "chatter": "martin john aguilar", "method": "Message", "resolution": "Confronted about his MM \"include\", requested him to send me a screenshot before sending any Mms"}, {"date": "2026-02-06", "chatter": "Leny Rose L. Noma", "method": "Voice Chat", "resolution": "The chatter did not follow the inflow script and instead used a personal script, which disrupted the intended flow and reduced consistency and effectiveness in handling the conversation."}, {"date": "2026-02-06", "chatter": "Leny Rose L. Noma", "method": "Voice Chat", "resolution": "The chatter did not follow the inflow script and instead used a personal script, which disrupted the intended flow and reduced consistency and effectiveness in handling the conversation."}, {"date": "2026-02-06", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "The chatter left the fan without a response, which breaks the flow of the conversation and risks losing engagement and potential sales."}, {"date": "2026-02-06", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "There was no use of the script, including the No-Go Fan script, despite the fan clearly mentioning a card issue. This led to missed control of the conversation and a lost opportunity to properly handle the objection and guide the fan forward."}, {"date": "2026-02-06", "chatter": "Adriane Ellor Sulita", "method": "Voice Chat", "resolution": "He should not have agreed to being spoken to or directed by the fan in that manner, as it does not align with the professional standards or positioning of the model."}, {"date": "2026-02-06", "chatter": "Adedeji Oyeniran", "method": "Voice Chat", "resolution": "The chatter left the fan without a response, which breaks the flow of the conversation and risks losing engagement and potential sales."}, {"date": "2026-02-05", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "This is more like a grammar error Mary but if you're going to use \"you're\" you don't need to say \"are\" basically \"you're\" is \"you are\" .."}, {"date": "2026-02-05", "chatter": "Samantha Vanguardia", "method": "Message", "resolution": "The question “Are you going to open it once I send it?” interrupts a moment where the fan is already fully primed and verbally committed. At this stage, adding a confirmation question slows momentum and introduces hesitation where there was none. After strong hype and clear desire, it’s more effective to send the PPV immediately and let anticipation carry the action. Removing extra checks here keeps the flow hot and increases the chance of an instant open and purchase."}, {"date": "2026-02-05", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "There was insufficient effort to push PPV sales, and the script was not followed—particularly the No-Go Fan script. Stronger execution and adherence to the sales flow are needed to improve conversions."}, {"date": "2026-02-05", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "chatter left a nonresponse"}, {"date": "2026-02-05", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "There was no response to the fan, which resulted in a missed opportunity to engage and build momentum in the conversation."}, {"date": "2026-02-05", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "The chatter did not use the approved script, which led to a less structured interaction and reduced effectiveness in guiding the conversation and driving engagement."}, {"date": "2026-02-05", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "After the call with Rei, I instructed the chatters on how to properly use the new script and see to it that they all understood the proper sequencing. "}, {"date": "2026-02-05", "chatter": "martin john aguilar", "method": "Voice Chat", "resolution": "There was no chatter on the account, and one team was handled the model; someone was already assigned to chat ASAP."}, {"date": "2026-02-05", "chatter": "martin john aguilar", "method": "Message", "resolution": "provided my MM setting, include and exclude."}, {"date": "2026-02-05", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "The interaction with the fan is overly transactional and lacks attraction. Building rapport, curiosity, and light tension is needed before pushing sales to make the conversation more engaging and effective."}, {"date": "2026-02-04", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "The chatter’s replies are not engaging enough, especially with new subscribers. New subs need more attention, warmth, and interaction to spark interest, build rapport, and encourage continued engagement."}, {"date": "2026-02-04", "chatter": "Dionefel Mamites", "method": "Message", "resolution": "Decline the panty purchase since Antonella doesn't do it. Push through the custom"}, {"date": "2026-02-04", "chatter": "Princess Diane Manalo", "method": "Voice Chat", "resolution": "Sending random PPVs to inactive fans without any prior sexting or engagement is ineffective and hurts conversion. PPVs should always be supported by conversation buildup to create interest and intent before selling."}, {"date": "2026-02-04", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The relationship with the fan feels too transactional and needs more attraction and emotional pull. Adding light teasing, curiosity, and natural flow will help make the conversation more engaging and less sales-focused."}, {"date": "2026-02-04", "chatter": "Sheenmy A. Miro", "method": "Message", "resolution": "Sheenmy didn't clock in, and I reassigned her teams to the chatter who were available to cover and to handle it until EOS or until chatter are interested to cover on her shift."}, {"date": "2026-02-04", "chatter": "Dionefel Mamites", "method": "Message", "resolution": "Provided the necessary information and instructions for MYM model."}, {"date": "2026-02-04", "chatter": "Ralf Zyre Bambalan", "method": "Voice Chat", "resolution": "His conversation with the fan felt fragile and lacked follow-up PPVs to drive sales. Stronger confidence, better timing, and clear follow-through after engagement are needed to convert interest into purchases."}, {"date": "2026-02-04", "chatter": "Samantha Vanguardia", "method": "Message", "resolution": "While the intent to gather the fan’s personal info is valid, the timing here disrupts a high-arousal moment that was already moving toward conversion. The fan was actively engaged and escalating, so switching to background questions risks breaking momentum and cooling intent. In moments like this, it’s more effective to stay in the flow, reinforce desire, and guide him naturally toward a sale first. Personal details can be collected later once the purchase path is secured or during post-sale conversation."}, {"date": "2026-02-04", "chatter": "Matt Yuri V. Albarillo", "method": "Voice Chat", "resolution": "The chatter’s sales performance was significantly below expectations, with minimal effort or effectiveness in driving purchases. Greater focus on engagement, confidence, and proper selling execution is needed to improve results."}, {"date": "2026-02-04", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "The conversation felt fragile and lacked engagement. Strengthening the flow with more confidence, teasing, and purposeful direction would help create a more compelling and enjoyable interaction."}, {"date": "2026-02-03", "chatter": "Ralf Zyre Bambalan", "method": "Message", "resolution": "Ralf saw the chatter were just sending random PPVs without any sexting, and this should not be applicable, as there is no tension between fan and chatter, and they are just dropping PPVs even when fans are inactive. Directed this already to the respective CM and TL."}, {"date": "2026-02-03", "chatter": "Ruztinn Josef Francisco", "method": "Message", "resolution": "Assisted the chatter about the custom pricing, which can be priced for the standard price, and suggested that he can even upsell the pricing if the fan is interested or once the chatter has the deal to custom."}, {"date": "2026-02-02", "chatter": "Leny Rose L. Noma", "method": "Message", "resolution": "Chatter wasn't able to attend her shift on time since they were experiencing heavy rain in their area; I did reassign her teams to the rest of the chatters."}, {"date": "2026-02-02", "chatter": "Don Mc Rey Parone", "method": "Message", "resolution": "Don wasn't able to clock in on time on his shift since he was late. I did announced on the channel who will cover and Dionedfel fif covered for his shift until the chatter clocks in."}, {"date": "2026-02-02", "chatter": "Ralf Zyre Bambalan", "method": "Message", "resolution": "I asked Ralf not to close a custom that the model can't do, which is squirting and push him to try another custom"}, {"date": "2026-02-01", "chatter": "Earl Clyde Leinand Ty", "method": "Message", "resolution": "Basically, editing a follow-up for the casino sequence, since the sub stops at the first locked message."}, {"date": "2026-02-01", "chatter": "Earl Clyde Leinand Ty", "method": "Voice Chat", "resolution": "AI stopped chatting for 4 minutes on a sexting session. Told the chatter to take over."}, {"date": "2026-02-01", "chatter": "Earl Clyde Leinand Ty", "method": "Message", "resolution": "Follow up on a message trying to fix and mend the situation with a whale. "}, {"date": "2026-02-01", "chatter": "Ralf Zyre Bambalan", "method": "Message", "resolution": "Gave notes and instructions on how to navigate mym and Ailen's chatting style."}, {"date": "2026-01-31", "chatter": "Ruztinn Josef Francisco", "method": "Message", "resolution": "The fan asked for proofs. It's better to gaslight them to committing first before asking for anything and to be always in control of conversations."}, {"date": "2026-01-31", "chatter": "Kokoette Okon Umanah", "method": "Message", "resolution": "I suggested to the chatter to use the follow-up script, which will be way better and easier for him to follow up on a PPV whenever the chatters are selling."}, {"date": "2026-01-31", "chatter": "Edgar Danson ", "method": "Message", "resolution": "Custom clarifications for Jessica"}, {"date": "2026-01-31", "chatter": "Kimberly Gaile Diaz Bacani", "method": "Voice Chat", "resolution": "I reminded the chatter to not forget the subs from OFTV and to add it to the list once successfully transferred to the VIP account."}, {"date": "2026-01-31", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "Assisted CJ with the new implementation of the model, which is Riri for the OFTV and the VIP page."}, {"date": "2026-01-31", "chatter": "JOHN ARSEL MUHI ", "method": "Voice Chat", "resolution": "Angel wasn't able to come back from the shift, so John offered to handle the team of Angel. "}, {"date": "2026-01-30", "chatter": "Cezar E. Edades Jr", "method": "Voice Chat", "resolution": "I said to Chatter not to ask about how much the fan can spend, but to make sure to know the worth of the model too, I also suggested using the scripts within this kind of scenario."}, {"date": "2026-01-30", "chatter": "Princess Diane Manalo", "method": "Message", "resolution": "cancelled the custom request, payment needs to be atleast half of the said custom"}, {"date": "2026-01-30", "chatter": "Dionefel Mamites", "method": "Voice Chat", "resolution": "The chatter did reason out of leaving those messages because the fans were TW, as I said to him. It is still not valid, as he can use scripts for, like, a \"no-go fan\" and not leave those messages unattended. I will give him a warning as well."}, {"date": "2026-01-30", "chatter": "Amos Wanjala", "method": "Message", "resolution": "Chatter should be more dominant when it comes to male models and not too submissive when it comes to chatting."}, {"date": "2026-01-30", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "I gave feedback to Chatter and made sure to avoid responses that are too dry or even too dull when it comes to chatting."}, {"date": "2026-01-29", "chatter": "Steven Mwamuye", "method": "Message", "resolution": "The follow-up timing is good, but the message could lean harder into anticipation before waiting for payment. After he confirmed he’s turned on, this was a prime moment to layer in light FOMO, hinting that what comes next is limited, tempting, and easy to miss. Adding a teasing line that suggests escalation (without repeating the ask) would keep his desire active while nudging urgency. Right now, the line pauses the energy; a touch more suspense would carry the momentum forward."}, {"date": "2026-01-29", "chatter": "Cris John Lacno", "method": "Message", "resolution": "I already gave feedback to the chatter and suggested that when teasing is successful, it should be continuous and not just asking questions like \"Oh, really?\" but trying to use scripts or be more engaging so it won't be dull."}, {"date": "2026-01-29", "chatter": "martin john aguilar", "method": "Message", "resolution": "Provided the link to the Hubstaff report - assisted on what time to put in UTC."}, {"date": "2026-01-29", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "Chatter should make the offer of the content more likely, like it is limited, and not ask questions that the fan can answer. Leading the conversation and being less submissive to conversation will be better and be good at selling."}, {"date": "2026-01-29", "chatter": "Ruztinn Josef Francisco", "method": "Message", "resolution": "gave feedback to chatter"}, {"date": "2026-01-29", "chatter": "Trishia Izze Casangyao", "method": "Message", "resolution": "Trained her how she can make Goated sales "}, {"date": "2026-01-29", "chatter": "Allonah Yvonne D. Tumampos", "method": "Voice Chat", "resolution": "Shared my screen and gave a more thorough explaination how does the casino script works."}, {"date": "2026-01-29", "chatter": "Cris John Lacno", "method": "Message", "resolution": "I gave feedback to Chatter. I suggested following the script and read what's on the description, as this helps him know what to send as well and not to ruin the sequencing or essence of the script"}, {"date": "2026-01-29", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "I gave feedback through DM; chatters should try to be more descriptive about what they are selling to the fan so the fan will think that they do make an effort doing content or are just simply sending the script that aligns with the situation."}, {"date": "2026-01-29", "chatter": "Allonah Yvonne D. Tumampos", "method": "Message", "resolution": "Redirect the conversation that leads to a script."}, {"date": "2026-01-29", "chatter": "Ruztinn Josef Francisco", "method": "Message", "resolution": "Gave feedback to Chatter and reminded him to use proper script and how to sequence it properly and not to be more submissive when it comes to chats and to make it more engaging to build curiosity in fans."}, {"date": "2026-01-29", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "suggested to the chatter to use the script and try to diver the topic as much as possible since fans may be really into meet-ups especially into the male accounts."}, {"date": "2026-01-28", "chatter": "Amos Wanjala", "method": "Message", "resolution": "I gave feedback to Amos, as he should not try to divert the topic more when fans like bringing up topics with minorities or even underage people to make sure as well what the initial intention of the fan on site is."}, {"date": "2026-01-28", "chatter": "Princess Diane Manalo", "method": "Message", "resolution": "Directed it to the respective TL, as this is prohibited even without sexting, since the fan spender may be confused and think that this will be an aggressive approach."}, {"date": "2026-01-28", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "I advised the chatter to be more confident when it comes to selling and not just to say to fans to watch it but to be more descriptive and build more tension so the fan will be more curious when it comes to selling and sexting"}, {"date": "2026-01-28", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "I gave feedback to Cesar via DM, and I made sure for him to try to understand the whole situation, try to put himself into the fan's shoes, and try to give more advice to have a better relationship with the fan."}, {"date": "2026-01-28", "chatter": "Cris John Lacno", "method": "Voice Chat", "resolution": "I dragged CJ on the server to call and to explain that he should push through the casino game script as I instructed him earlier and should be working to do these things, as the management is checking some of his responses and has already given feedback on this kind of approach. If the chatter is still continuous, we will have a 1v1 call."}, {"date": "2026-01-28", "chatter": "Leny Rose L. Noma", "method": "Message", "resolution": "Chatter was not building tension on chatter, which will be better to make sure to build tension and try to tease the fan more rather than just saying 'horny' randomly."}, {"date": "2026-01-28", "chatter": "Earl Clyde Leinand Ty", "method": "Message", "resolution": "Provided some ideas/lines he can use for that specific scenario. Pitch the custom and hype the surprise to keep the fan engage and interested."}, {"date": "2026-01-28", "chatter": "Angel Joyce Ranosa", "method": "Message", "resolution": "After the sub said he’s broke, the response became too dry and closed the conversation too abruptly. This was still an opportunity to keep things warm, gather basic info (age, job, location), and understand his situation without pressure. A softer pivot — acknowledging him, staying playful, then politely stepping away — would preserve rapport instead of making the interaction feel dismissed. Ending with something like being busy for now keeps the door open for future engagement and conversion."}, {"date": "2026-01-27", "chatter": "Hannah Andrea Ibañez", "method": "Message", "resolution": "Chatter should maximise traffic and should be poking new subs and not just on the screen"}, {"date": "2026-01-27", "chatter": "Kokoette Okon Umanah", "method": "Message", "resolution": "I said that we shouldn't lower the price we are offering especially on the custom suince 5 mins for $100 is too low forthe custom we are offerinf especally if it it is a custom video"}, {"date": "2026-01-27", "chatter": "Ralf Zyre Bambalan", "method": "Message", "resolution": "Gave feedback to the chatter and suggested that the chatter should say that the model can show that she is supporting herself when it comes to doing OF"}, {"date": "2026-01-27", "chatter": "Leny Rose L. Noma", "method": "Message", "resolution": "Gave feedback to the chatter and suggested not to repeat words, as this may sound too robotic, but to send some from scripts or freestyle when doing a follow-up message."}, {"date": "2026-01-27", "chatter": "Samantha Vanguardia", "method": "Message", "resolution": "Slow response on some models and just focusing too much on having a sexting with a fan when he can always come back for that fan and clearing some of the unreads for more than 5 minutes. I did ask if she can handle those with mid-traffic models."}, {"date": "2026-01-27", "chatter": "Hannah Andrea Ibañez", "method": "Message", "resolution": "Gave feedback to Chatter and suggested making the fans' personal problems and showing empathy as well."}, {"date": "2026-01-27", "chatter": "martin john aguilar", "method": "Message", "resolution": "Gave personal feedback to the chatter."}, {"date": "2026-01-26", "chatter": "Ralf Zyre Bambalan", "method": "Message", "resolution": "Gave feedback thru DM to the chatter"}, {"date": "2026-01-26", "chatter": "Hannah Andrea Ibañez", "method": "Message", "resolution": "I directed Hannah and confirmed what's up with this kind of reasoning. I also asked the CHM what the best punishment is for this kind of excuse."}, {"date": "2026-01-26", "chatter": "Leny Rose L. Noma", "method": "Message", "resolution": "Gave personal feedback via DM"}, {"date": "2026-01-26", "chatter": "Kokoette Okon Umanah", "method": "Message", "resolution": "Gave personal feedback thru DM"}, {"date": "2026-01-26", "chatter": "Angel Joyce Ranosa", "method": "Message", "resolution": "I direct it to Angel's TL since she is not following the notes again and pushing to sell PPVs to fans who have pending customs. I also messaged Angel to ask what she thought was wrong with the conversation when the fan didn't even insist on some sexting, but she did push to sell a PPV."}, {"date": "2026-01-26", "chatter": "Cris John Lacno", "method": "Message", "resolution": "Gave personal feedback to the chatter"}, {"date": "2026-01-26", "chatter": "Angeline Daclizon", "method": "Message", "resolution": "Directed to her respective TL about the issue of Angel selling the teaser."}, {"date": "2026-01-26", "chatter": "Adedeji Oyeniran", "method": "Voice Chat", "resolution": "Helped him to stop notifications on infloww "}, {"date": "2026-01-26", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "The reply jumps straight into pricing, which breaks the momentum and makes the interaction feel transactional rather than seductive. Since the fan said “I’d love to see,” this was a strong cue to slow down, tease, and build imagery before mentioning anything paid. Setting the mood first (hinting at how you’d show him, what makes it tempting, why it’s just for him) would deepen emotional buy-in. Once curiosity and desire are established, the conversion feels natural instead of abrupt."}, {"date": "2026-01-25", "chatter": "Edgar Danson ", "method": "Message", "resolution": "Had problems with fan's fetish and i was able to turn the fetish to a custom, took him through how to use fan's words to content selling "}, {"date": "2026-01-25", "chatter": "Earl Clyde Leinand Ty", "method": "Message", "resolution": "A stronger approach would be to tease the idea lightly, ask a couple of basics (age, location, what he does), and let him feel personally seen before pitching."}, {"date": "2026-01-25", "chatter": "MARY WAMBUI GITHIGE", "method": "Message", "resolution": "Even though the sub said “I can’t pay,” this shouldn’t have ended the conversation so quickly. At five days old, we still hadn’t gathered any basic info (age, job, location), which is valuable for understanding intent and future conversion potential. This was a good moment to shift into light rapport-building instead of disengaging, keeping the tone friendly and pressure-free. Collecting context here helps segment the fan properly and gives us options later rather than closing the door too early."}, {"date": "2026-01-25", "chatter": "Cezar E. Edades Jr", "method": "Message", "resolution": "Suggested a better fit for a teaser."}], "no_team": [], "generated": "2026-02-11 13:22 UTC", "current_hour": 13, "weeks": [{"start": "2026-02-09", "end": "2026-02-15", "label": "Feb 09 – Feb 15"}, {"start": "2026-02-02", "end": "2026-02-08", "label": "Feb 02 – Feb 08"}, {"start": "2026-01-26", "end": "2026-02-01", "label": "Jan 26 – Feb 01"}, {"start": "2026-01-19", "end": "2026-01-25", "label": "Jan 19 – Jan 25"}, {"start": "2026-01-12", "end": "2026-01-18", "label": "Jan 12 – Jan 18"}, {"start": "2026-01-05", "end": "2026-01-11", "label": "Jan 05 – Jan 11"}], "default_week": "2026-02-02", "today": "2026-02-11"};

// ── Helpers ──
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

function urgColor(u) { return u >= 70 ? '#f85149' : u >= 40 ? '#d29922' : '#3fb950'; }
function daysBadge(d) {
  if(d < 0) return '<span class="badge b-red">Never</span>';
  if(d >= 14) return `<span class="badge b-red">${d}d</span>`;
  if(d >= 5) return `<span class="badge b-yellow">${d}d</span>`;
  return `<span class="badge b-green">${d}d</span>`;
}
function kpiColor(val, thresh) {
  if(val === null) return '#484f58';
  const ratio = val / thresh;
  return ratio < 0.6 ? '#f85149' : ratio < 1 ? '#d29922' : '#3fb950';
}
function pn(v) { try { return parseFloat(String(v).replace(/[$%,]/g,'')); } catch(e) { return null; } }

// ── Week selector logic ──
let weekIdx = 0; // index into D.weeks array (0 = newest)

function findDefaultWeek() {
  const dw = D.default_week;
  for(let i = 0; i < D.weeks.length; i++) {
    if(D.weeks[i].start === dw) return i;
  }
  return D.weeks.length > 1 ? 1 : 0; // fallback: second newest (= previous week)
}

function getWeek() { return D.weeks[weekIdx]; }

function isCurrentWeek() {
  const w = getWeek();
  return w.start <= D.today && D.today <= w.end;
}

function weekLogs() {
  const w = getWeek();
  return D.logs.filter(l => l.date >= w.start && l.date <= w.end);
}

function weekReports() {
  const w = getWeek();
  return D.reports.filter(r => r.date >= w.start && r.date <= w.end);
}

function tlWeekStats(k) {
  const t = D.tl[k];
  const wl = weekLogs().filter(l => l.tl.toLowerCase() === t.name.toLowerCase());
  return {
    sessions: wl.length,
    coached: new Set(wl.map(l => l.chatter)).size,
  };
}

function updateWeekLabel() {
  const w = getWeek();
  const isCurr = isCurrentWeek();
  const tag = isCurr
    ? '<span class="week-tag current">Current week</span>'
    : (weekIdx === findDefaultWeek() ? '<span class="week-tag prev">Previous week</span>' : '');
  const partial = isCurr ? '<span class="sub">In progress</span>' : '<span class="sub">Completed week</span>';
  $('#weekLabel').innerHTML = `${w.label} ${tag}${partial}`;
  $('#weekPrev').disabled = weekIdx >= D.weeks.length - 1;
  $('#weekNext').disabled = weekIdx <= 0;
}

function changeWeek(dir) {
  const newIdx = weekIdx - dir; // weeks array is newest-first, so prev = +1, next = -1
  if(newIdx < 0 || newIdx >= D.weeks.length) return;
  weekIdx = newIdx;
  updateWeekLabel();
  renderAll();
}

// ── Tab nav ──
$$('.nav button').forEach(btn => {
  btn.addEventListener('click', () => {
    $$('.nav button').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    $$('.section').forEach(s => s.classList.remove('active'));
    $(`#sec-${btn.dataset.tab}`).classList.add('active');
  });
});

// ── Overview ──
function renderOverview() {
  const totalChatters = D.chatters.length;
  const wl = weekLogs();
  const totalAlarms = D.chatters.filter(c => c.alarm_count > 0).length;
  const noTeam = D.no_team.length;

  const hour = D.current_hour;
  let onShift = null;
  Object.entries(D.tl).forEach(([k, v]) => {
    if(v.shift_start <= hour && hour < v.shift_end) onShift = k;
    if(v.shift_start > v.shift_end && (hour >= v.shift_start || hour < v.shift_end)) onShift = k;
  });

  $('#genTime').innerHTML = `Last updated: ${D.generated}` +
    (onShift ? ` &nbsp;|&nbsp; <span class="live-dot"></span> ${D.tl[onShift].name} on shift` : '');

  $('#topStats').innerHTML = `
    <div class="stat-card"><div class="num" style="color:#58a6ff">${totalChatters}</div><div class="lbl">Active Chatters</div></div>
    <div class="stat-card"><div class="num" style="color:#3fb950">${wl.length}</div><div class="lbl">Sessions (week)</div></div>
    <div class="stat-card"><div class="num" style="color:#3fb950">${new Set(wl.map(l=>l.chatter)).size}</div><div class="lbl">Coached (week)</div></div>
    <div class="stat-card"><div class="num" style="color:${totalAlarms>0?'#f85149':'#3fb950'}">${totalAlarms}</div><div class="lbl">KPI Alarms</div></div>
    <div class="stat-card"><div class="num" style="color:${noTeam>0?'#d29922':'#3fb950'}">${noTeam}</div><div class="lbl">Unassigned</div></div>
  `;

  if(noTeam > 0) {
    $('#alertBanner').innerHTML = `<div class="alert-banner"><strong>${noTeam} chatters without team:</strong> ${D.no_team.join(', ')}</div>`;
  }

  // TL cards with week-aware stats
  let cards = '';
  ['huckle','danilyn','ezekiel'].forEach(k => {
    const t = D.tl[k];
    const ws = tlWeekStats(k);
    const pct = t.total > 0 ? Math.round(ws.coached / t.total * 100) : 0;
    const barC = pct >= 70 ? '#3fb950' : pct >= 30 ? '#d29922' : '#f85149';
    const isOn = onShift === k;
    cards += `
    <div class="tl-card" onclick="$$('.nav button').forEach(b=>{if(b.dataset.tab==='${k}')b.click()})" style="border-color:${isOn?t.color:'#30363d'}">
      <div class="tl-top">
        <div class="tl-name" style="color:${t.color}">${isOn?'<span class="live-dot"></span>':''}${t.name}</div>
        <span class="tl-shift-badge" style="background:${t.color}22;color:${t.color};border:1px solid ${t.color}33">${t.shift} UTC</span>
      </div>
      <div class="tl-nums">
        <div class="n"><div class="v">${t.total}</div><div class="l">Chatters</div></div>
        <div class="n"><div class="v">${ws.sessions}</div><div class="l">Sessions</div></div>
        <div class="n"><div class="v" style="color:${t.kpi_alarms>0?'#f85149':'#3fb950'}">${t.kpi_alarms}</div><div class="l">Alarms</div></div>
        <div class="n"><div class="v">${pct}%</div><div class="l">Coverage</div></div>
      </div>
      <div class="bar-bg"><div class="bar-fill" style="width:${pct}%;background:${barC}"></div></div>
      <div class="bar-label">${ws.coached}/${t.total} coached this week</div>
    </div>`;
  });
  $('#tlCards').innerHTML = cards;

  renderChatterGrid('overview', D.chatters, 'allChatters');
}

// ── Chatter card ──
function chatterCard(c) {
  const uc = urgColor(c.urgency);
  const hasAlarm = c.alarm_count > 0;

  let tags = '';
  if(hasAlarm) tags += `<span class="tag t-red">${c.alarm_count} KPI</span>`;
  if(c.errors > 0) tags += `<span class="tag t-orange">${c.errors} errors</span>`;
  if(!hasAlarm && c.errors === 0) tags += `<span class="tag t-green">OK</span>`;
  tags += ` ${daysBadge(c.days_since)}`;

  // Check if coached in selected week
  const w = getWeek();
  const coachedThisWeek = D.logs.some(l => l.chatter === c.name && l.date >= w.start && l.date <= w.end);
  if(coachedThisWeek) tags += ' <span class="badge b-green">Coached</span>';

  let kpiHtml = '';
  const kpiDefs = [
    {key:'sales_hr',label:'Sales/hr',thresh:10},
    {key:'cvr',label:'CVR',thresh:5},
    {key:'unlock',label:'Unlock',thresh:20},
    {key:'golden',label:'Golden',thresh:1},
    {key:'reply_time',label:'Reply',thresh:null},
    {key:'msg_hr',label:'Msg/hr',thresh:null},
  ];
  if(c.kpi && Object.keys(c.kpi).length > 1) {
    kpiDefs.forEach(d => {
      const raw = c.kpi[d.key];
      if(!raw) return;
      const v = pn(raw);
      const col = d.thresh ? kpiColor(v, d.thresh) : '#58a6ff';
      const pct = d.thresh && v !== null ? Math.min(100, Math.round(v / d.thresh * 100)) : 50;
      kpiHtml += `<div class="kpi-item"><div class="kpi-label">${d.label}</div><div class="kpi-val" style="color:${col}">${raw}</div>` +
        (d.thresh ? `<div class="kpi-bar"><div class="kpi-bar-fill" style="width:${pct}%;background:${col}"></div></div>` : '') +
        `</div>`;
    });
  }

  let errHtml = '';
  if(c.recent_errors && c.recent_errors.length > 0) {
    c.recent_errors.forEach(e => {
      errHtml += `<div class="err-item">[${e.date}] ${e.text}</div>`;
    });
  }

  let coachHtml = '';
  if(c.last_notes) coachHtml += `<p style="color:#8b949e">${c.last_notes}</p>`;
  if(c.last_action) coachHtml += `<p style="color:#d2a8ff">Action: ${c.last_action}</p>`;

  const id = 'ch-' + c.name.replace(/[^a-zA-Z0-9]/g,'_');

  return `
  <div class="ch-card ${hasAlarm?'alarm':''}" id="${id}">
    <div class="ch-main" onclick="document.querySelector('#${id} .ch-detail').classList.toggle('open')">
      <div class="ch-left">
        <div class="ch-name">${c.name}</div>
        <div class="ch-meta">${tags} <span class="tag t-blue">${c.team_display}</span></div>
      </div>
      <div class="ch-right">
        <div class="ch-urg" style="color:${uc}">${c.urgency}</div>
        <div class="ch-urg-label">urgency</div>
      </div>
    </div>
    <div class="ch-detail">
      ${kpiHtml ? '<div class="kpi-grid">'+kpiHtml+'</div>' : ''}
      ${errHtml ? '<div class="detail-section"><h4>Recent Issues</h4>'+errHtml+'</div>' : ''}
      ${coachHtml ? '<div class="detail-section"><h4>Last Coaching</h4>'+coachHtml+'</div>' : ''}
      ${!kpiHtml && !errHtml && !coachHtml ? '<p style="color:#484f58;padding:10px">No additional data</p>' : ''}
    </div>
  </div>`;
}

// ── Render chatter grid with filtering/sorting ──
let sortState = {overview:'urgency',huckle:'urgency',danilyn:'urgency',ezekiel:'urgency'};
let filterState = {overview:'all',huckle:'all',danilyn:'all',ezekiel:'all'};

function renderChatterGrid(ctx, chatters, containerId) {
  const s = sortState[ctx];
  const f = filterState[ctx];
  let list = [...chatters];

  if(f === 'alarm') list = list.filter(c => c.alarm_count > 0);
  if(f === 'nocoach') list = list.filter(c => c.days_since < 0);
  if(f === 'coached') {
    const w = getWeek();
    const coachedNames = new Set(D.logs.filter(l => l.date >= w.start && l.date <= w.end).map(l => l.chatter));
    list = list.filter(c => coachedNames.has(c.name));
  }
  if(f === 'notcoached') {
    const w = getWeek();
    const coachedNames = new Set(D.logs.filter(l => l.date >= w.start && l.date <= w.end).map(l => l.chatter));
    list = list.filter(c => !coachedNames.has(c.name));
  }

  const searchEl = $(`#search${ctx.charAt(0).toUpperCase()+ctx.slice(1)}`) || $('#searchAll');
  if(searchEl && searchEl.value) {
    const q = searchEl.value.toLowerCase();
    list = list.filter(c => c.name.toLowerCase().includes(q));
  }

  if(s === 'urgency') list.sort((a,b) => b.urgency - a.urgency);
  if(s === 'name') list.sort((a,b) => a.name.localeCompare(b.name));
  if(s === 'days') list.sort((a,b) => (b.days_since < 0 ? 9999 : b.days_since) - (a.days_since < 0 ? 9999 : a.days_since));
  if(s === 'alarms') list.sort((a,b) => b.alarm_count - a.alarm_count || b.urgency - a.urgency);

  const el = $(`#${containerId}`);
  if(el) el.innerHTML = list.length > 0
    ? list.map(c => chatterCard(c)).join('')
    : '<div class="empty"><p>No chatters match filters</p></div>';
}

function toggleFilter(btn, ctx) {
  btn.parentElement.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('on'));
  btn.classList.add('on');
  filterState[ctx] = btn.dataset.f;
  const cid = ctx === 'overview' ? 'allChatters' : ctx+'Chatters';
  const chatters = ctx === 'overview' ? D.chatters : D.chatters.filter(c => c.team === ctx);
  renderChatterGrid(ctx, chatters, cid);
}

function setSort(btn, ctx) {
  btn.parentElement.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  sortState[ctx] = btn.dataset.s;
  const cid = ctx === 'overview' ? 'allChatters' : ctx+'Chatters';
  const chatters = ctx === 'overview' ? D.chatters : D.chatters.filter(c => c.team === ctx);
  renderChatterGrid(ctx, chatters, cid);
}

// ── TL detail tabs (week-aware) ──
function renderTLTab(k) {
  const t = D.tl[k];
  const ws = tlWeekStats(k);
  const members = D.chatters.filter(c => c.team === k);
  const sec = $(`#sec-${k}`);

  sec.innerHTML = `
    <div style="display:flex;align-items:center;gap:12px;margin-bottom:20px">
      <div style="font-size:1.4em;font-weight:700;color:${t.color}">${t.name}</div>
      <span class="tl-shift-badge" style="background:${t.color}22;color:${t.color};border:1px solid ${t.color}33">${t.shift} UTC</span>
      <span style="color:#8b949e;font-size:.85em">${t.total} chatters</span>
    </div>
    <div class="stats-row">
      <div class="stat-card"><div class="num" style="color:${t.color}">${t.total}</div><div class="lbl">Chatters</div></div>
      <div class="stat-card"><div class="num" style="color:#3fb950">${ws.sessions}</div><div class="lbl">Sessions (week)</div></div>
      <div class="stat-card"><div class="num" style="color:${t.kpi_alarms>0?'#f85149':'#3fb950'}">${t.kpi_alarms}</div><div class="lbl">KPI Alarms</div></div>
      <div class="stat-card"><div class="num">${ws.coached}/${t.total}</div><div class="lbl">Coached (week)</div></div>
    </div>
    <div class="search-box">
      <input type="text" id="search${k.charAt(0).toUpperCase()+k.slice(1)}" placeholder="Search..." oninput="renderChatterGrid('${k}',D.chatters.filter(c=>c.team==='${k}'),'${k}Chatters')">
      <button class="filter-btn on" data-f="all" onclick="toggleFilter(this,'${k}')">All</button>
      <button class="filter-btn" data-f="alarm" onclick="toggleFilter(this,'${k}')">With Alarms</button>
      <button class="filter-btn" data-f="coached" onclick="toggleFilter(this,'${k}')">Coached</button>
      <button class="filter-btn" data-f="notcoached" onclick="toggleFilter(this,'${k}')">Not Coached</button>
    </div>
    <div class="sort-bar">
      <button class="sort-btn active" data-s="urgency" onclick="setSort(this,'${k}')">Urgency</button>
      <button class="sort-btn" data-s="name" onclick="setSort(this,'${k}')">Name</button>
      <button class="sort-btn" data-s="days" onclick="setSort(this,'${k}')">Days Since</button>
      <button class="sort-btn" data-s="alarms" onclick="setSort(this,'${k}')">Alarms</button>
    </div>
    <div class="chatter-grid" id="${k}Chatters"></div>
  `;

  renderChatterGrid(k, members, k+'Chatters');
}

// ── Alarms table ──
function renderAlarms() {
  const alarmed = D.chatters.filter(c => c.alarm_count > 0).sort((a,b) => b.alarm_count - a.alarm_count);
  let rows = '<thead><tr><th>Chatter</th><th>Team</th><th>Alarms</th><th>Period</th></tr></thead><tbody>';
  if(alarmed.length === 0) {
    rows += '<tr><td colspan="4" style="text-align:center;padding:24px;color:#484f58">No KPI alarms</td></tr>';
  } else {
    alarmed.forEach(c => {
      const tags = c.alarms.map(a => `<span class="tag t-red">${a.metric}: ${a.value}</span>`).join(' ');
      rows += `<tr><td style="font-weight:500">${c.name}</td><td>${c.team_display}</td><td>${tags}</td><td style="color:#8b949e;font-size:.85em">${c.kpi.period||''}</td></tr>`;
    });
  }
  rows += '</tbody>';
  $('#alarmTable').innerHTML = rows;
}

// ── Activity log (week-filtered) ──
function renderActivity() {
  const w = getWeek();
  const wl = weekLogs();
  const info = $('#activityWeekInfo');
  if(info) info.textContent = `${w.label} — ${wl.length} sessions`;

  if(wl.length === 0) {
    $('#activityContainer').innerHTML = '<div class="empty"><p>No coaching sessions this week.</p></div>';
    return;
  }
  let rows = '<table class="log-table"><thead><tr><th>Date</th><th>TL</th><th>Chatter</th><th>Method</th><th>Notes</th></tr></thead><tbody>';
  wl.forEach(l => {
    const eng = l.engagement ? ` (Eng: ${l.engagement}/10)` : '';
    const dur = l.duration ? ` ${l.duration}min` : '';
    const notes = l.notes ? (l.notes.length > 80 ? l.notes.slice(0,77)+'...' : l.notes) : '';
    rows += `<tr><td>${l.date}</td><td style="color:#58a6ff;font-weight:500">${l.tl}</td><td style="font-weight:500">${l.chatter}</td><td>${l.method||''}${dur}${eng}</td><td class="log-notes-cell">${notes}</td></tr>`;
  });
  rows += '</tbody></table>';
  $('#activityContainer').innerHTML = rows;
}

// ── Search binding ──
$('#searchAll').addEventListener('input', () => renderChatterGrid('overview', D.chatters, 'allChatters'));

// ── Render all (called on week change) ──
function renderAll() {
  renderOverview();
  ['huckle','danilyn','ezekiel'].forEach(k => renderTLTab(k));
  renderAlarms();
  renderActivity();
}

// ── Init ──
weekIdx = findDefaultWeek();
updateWeekLabel();
renderAll();
</script>
</body>
</html>